{
  "_comment": "dynamic strategy selection",
  "mt5": {
    "login": "${MT5_LOGIN}",
    "password": "${MT5_PASSWORD}",
    "server": "${MT5_SERVER}",
    "timeout": 60000,
    "path": "${MT5_PATH}"
  },
  "risk": {
    "max_position_size": 2.0,
    "default_position_size": 0.01,
    "max_daily_loss": 10.0,
    "max_positions_per_symbol": 3,
    "max_total_positions": 3,
    "position_size_pct": 10.0,
    "use_kelly_sizing": true,
    "emergency_stop_loss_pct": 12.0,
    "circuit_breaker_enabled": true,
    "circuit_breaker_threshold_pct": 7.0
  },
  "trading": {
    "symbol": "GOLDm#",
    "timeframe": "TIMEFRAME_H1",
    "min_time_in_trade_bars": 0,
    "trail_pct": 0.3,
    "concurrency": 1,
    "poll_interval": 15,
    "lookback_bars": 500,
    "enable_tick_data": true,
    "enable_scalping": true,
    "min_trade_interval": 120
  },
  "strategy": {
    "type": "dynamic",
    "dynamic_selection": {
      "regime_detection_enabled": true,
      "performance_tracking_enabled": true,
      "min_confidence_threshold": 0.6,
      "switch_cooldown_bars": 10
    },
    "strategies": [
      {
        "type": "sma_crossover",
        "params": {
          "fast_period": 10,
          "slow_period": 30
        }
      },
      {
        "type": "ema_crossover",
        "params": {
          "fast_period": 12,
          "slow_period": 26
        }
      },
      {
        "type": "momentum_breakout",
        "params": {
          "lookback_period": 20,
          "breakout_threshold": 1.5
        }
      },
      {
        "type": "scalping",
        "params": {
          "quick_period": 5,
          "trend_period": 20
        }
      },
      {
        "type": "mean_reversion",
        "params": {
          "bollinger_period": 20,
          "bollinger_std": 2.0,
          "rsi_period": 14
        }
      },
      {
        "type": "trend_following",
        "params": {
          "adx_period": 14,
          "adx_threshold": 25,
          "supertrend_period": 10
        }
      },
      {
        "type": "rsi_reversal",
        "params": {
          "rsi_period": 14,
          "rsi_extreme_oversold": 25,
          "rsi_extreme_overbought": 85
        }
      }
    ],
    "auto_indicators": true,
    "params": {
      "symbol": "BTCUSD#"
    }
  },
  "confidence_threshold": 0.4,
  "exit_strategies": [
    {
      "type": "adverse_movement",
      "enabled": true,
      "params": {
        "movement_threshold_pct": 0.5,
        "time_window_seconds": 30
      }
    },
    {
      "type": "time_based",
      "enabled": true,
      "params": {
        "max_hold_hours": 8.0,
        "close_before_weekend": true
      }
    },
    {
      "type": "profit_target",
      "enabled": true,
      "params": {
        "target_pct": 1.5,
        "partial_close_enabled": true,
        "partial_close_pct": 50.0
      }
    },
    {
      "type": "trailing_stop",
      "enabled": true,
      "params": {
        "atr_multiplier": 1.5,
        "activation_pct": 0.5
      }
    }
  ],
  "indicators": [
    {
      "type": "rsi",
      "params": {
        "period": 14,
        "overbought": 70,
        "oversold": 30
      }
    },
    {
      "type": "macd",
      "params": {
        "fast_period": 12,
        "slow_period": 26,
        "signal_period": 9
      }
    },
    {
      "type": "bollinger",
      "params": {
        "period": 20,
        "std_dev": 2.0
      }
    },
    {
      "type": "stochastic",
      "params": {
        "k_period": 14,
        "d_period": 3,
        "smooth": 3
      }
    },
    {
      "type": "adx",
      "params": {
        "period": 14
      }
    },
    {
      "type": "supertrend",
      "params": {
        "atr_period": 10,
        "atr_multiplier": 3.0
      }
    },
    {
      "type": "vwap",
      "params": {}
    },
    {
      "type": "vpt",
      "params": {}
    },
    {
      "type": "volume_oscillator",
      "params": {
        "short_period": 5,
        "long_period": 10
      }
    },
    {
      "type": "price_volume_trend",
      "params": {}
    },
    {
      "type": "atr",
      "params": {
        "period": 14
      }
    },
    {
      "type": "williams_r",
      "params": {
        "period": 14
      }
    }
  ],
  "database": {
    "path": "cthulu.db"
  },
  "rpc": {
    "enabled": true,
    "host": "127.0.0.1",
    "port": 8278
  },
  "features": {
    "ml_enabled": true,
    "adaptive_parameters": true,
    "multi_timeframe_analysis": true
  },
  "dynamic_sltp": {
    "enabled": true,
    "base_sl_atr_mult": 2.0,
    "base_tp_atr_mult": 4.0,
    "breakeven_activation_pct": 0.5,
    "breakeven_buffer_pct": 0.1,
    "partial_tp_enabled": true,
    "partial_tp_1_pct": 0.33,
    "partial_tp_2_pct": 0.66,
    "trail_activation_pct": 0.7,
    "trail_distance_atr_mult": 1.5
  },
  "adaptive_drawdown": {
    "enabled": true,
    "trailing_lock_pct": 0.5,
    "survival_threshold_pct": 50.0,
    "critical_threshold_pct": 35.0,
    "danger_threshold_pct": 20.0
  },
  "orphan_trades": {
    "enabled": true,
    "adopt_symbols": [],
    "ignore_symbols": [],
    "max_adoption_age_hours": 24,
    "min_age_seconds": 0,
    "min_volume": 0.0,
    "max_volume": null,
    "excluded_magic_numbers": [],
    "log_only": false
  },
  "entry_confluence": {
    "enabled": true,
    "min_score_to_enter": 40,
    "min_score_for_full_size": 65,
    "enable_wait_mode": true,
    "max_wait_bars": 6,
    "force_entry_on_timeout": false,
    "timeout_size_mult": 0.5,
    "sr_lookback": 150,
    "sr_min_touches": 2,
    "level_tolerance_atr": 0.8,
    "momentum_bars": 5,
    "momentum_weight": 0.2,
    "level_weight": 0.3,
    "timing_weight": 0.2,
    "structure_weight": 0.3,
    "require_trend_alignment": false,
    "min_confirmation_strategies": 1
  },
  "market_structure": {
    "enabled": true,
    "fractal_length": 5,
    "auto_detect_length": true,
    "max_fractal_history": 100,
    "require_bos_for_entry": false,
    "require_choch_for_entry": false,
    "structure_score_weight": 0.3,
    "counter_trend_penalty": 0.5
  },
  "multi_rrr_exit": {
    "enabled": true,
    "base_rrr": 1.3,
    "rrr_step": 0.2,
    "num_targets": 3,
    "target_distribution": [
      0.33,
      0.33,
      0.34
    ],
    "move_to_breakeven_after_tp1": true,
    "trail_after_tp1": true,
    "trail_distance_rrr": 0.5
  },
  "hektor": {
    "enabled": true,
    "fallback_to_sqlite": true,
    "database_path": "./vectors/cthulu_memory",
    "dimension": 512,
    "hnsw_m": 16,
    "hnsw_ef_construction": 200,
    "hnsw_ef_search": 50,
    "default_k": 10,
    "min_similarity_score": 0.7,
    "max_context_age_days": 90,
    "batch_size": 100,
    "async_writes": true,
    "cache_embeddings": true,
    "connection_timeout_ms": 5000,
    "retry_attempts": 3
  }
}